<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: init.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: init.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var restify = require('restify');
const querystring = require('querystring');

const url = 'https://api.etherscan.io/api';
/**
 * The Etherscan JS API
 * @exports init
 * @namespace etherscan
 */
module.exports = function (apiKey) {

  if (!apiKey) {
    apiKey = 'YourApiKeyToken';
  }

  var client = restify.createJsonClient({
    url: url,
    version: '*'
  });

  function getRequest(query) {
    var p = new Promise(function(resolve, reject) {
      client.get(url+'?'+query, function(err, req, res, data) {
        if (err) {
          return reject(err);
        }
        resolve(data);
      });
    });
    return p;
  }

  /**
   * @namespace etherscan/log
   */
  return {


    log: {
      /**
      * The Event Log API was designed to provide an alternative to the native eth_getLogs.
      * @namespace etherscan/log
      * @method getLogs
      */
      getLogs(
        address,
        fromBlock,
        toBlock,
        topic0,
        topic0_1_opr,
        topic1,
        topic1_2_opr,
        topic2,
        topic2_3_opr,
        topic3) {

        const module = 'log';
        const action = 'getLogs';
        var params = {
          module, action, apiKey, address
        };

        if (toBlock) {
          params.tolock = toBlock;
        }

        if (fromBlock) {
          params.fromBlock = fromBlock;
        }

        if (toBlock) {
          params.tolock = toBlock;
        }

        if (topic0) {
          params.topic0 = topic0;
        }

        if (topic0_1_opr) {
          params.topic0_1_opr = topic0_1_opr;
        }

        if (topic1) {
          params.topic1 = topic1;
        }

        if (topic1_2_opr) {
          params.topic1_2_opr = topic1_2_opr;
        }

        if (topic2) {
          params.topic2 = topic2;
        }

        if (topic2_3_opr) {
          params.topic2_3_opr = topic2_3_opr;
        }

        if (topic3) {
          params.topic3 = topic3;
        }
        var query = querystring.stringify(params);
        return getRequest(query);
      }
    },
    /**
     * @namespace etherscan/proxy
     */
    proxy: {
      eth_blockNumber() {
        const module = 'proxy';
        const action = 'eth_blockNumber';
        var query = querystring.stringify({
          module, action, apiKey
        });
        return getRequest(query);
      },
      eth_getBlockByNumber(tag) {
        const module = 'proxy';
        const action = 'eth_getBlockByNumber';
        const boolean = true;
        var query = querystring.stringify({
          module, action, tag, apiKey, boolean
        });
        return getRequest(query);
      },
      eth_getUncleByBlockNumberAndIndex(tag, index) {
        const module = 'proxy';
        const action = 'eth_getUncleByBlockNumberAndIndex';
        var query = querystring.stringify({
          module, action, apiKey, tag, index
        });
        return getRequest(query);
      },
      eth_getBlockTransactionCountByNumber(tag) {
        const module = 'proxy';
        const action = 'eth_getBlockTransactionCountByNumber';
        var query = querystring.stringify({
          module, action, apiKey, tag
        });
        return getRequest(query);
      },
      eth_getTransactionByHash(hash) {
        const module = 'proxy';
        const action = 'eth_getTransactionByHash';
        var query = querystring.stringify({
          module, action, apiKey, hash
        });
        return getRequest(query);
      },
      eth_getTransactionByBlockNumberAndIndex(tag, index) {
        const module = 'proxy';
        const action = 'eth_getTransactionByBlockNumberAndIndex';
        var query = querystring.stringify({
          module, action, apiKey, tag, index
        });
        return getRequest(query);
      },
      eth_getTransactionCount(address) {
        const module = 'proxy';
        const action = 'eth_getTransactionCount';
        var query = querystring.stringify({
          module, action, apiKey, address
        });
        return getRequest(query);
      },
      eth_sendRawTransaction(hex) {
        const module = 'proxy';
        const action = 'eth_sendRawTransaction';
        var query = querystring.stringify({
          module, action, apiKey, hex
        });
        return getRequest(query);
      },
      eth_getTransactionReceipt(txhash) {
        const module = 'proxy';
        const action = 'eth_getTransactionReceipt';
        var query = querystring.stringify({
          module, action, apiKey, txhash
        });
        return getRequest(query);
      },
      eth_call(to, tag) {
        const module = 'proxy';
        const action = 'eth_call';
        var query = querystring.stringify({
          module, action, apiKey, to, tag
        });
        return getRequest(query);
      },
      eth_getCode(address, tag) {
        const module = 'proxy';
        const action = 'eth_getCode';
        var query = querystring.stringify({
          module, action, apiKey, address, tag
        });
        return getRequest(query);
      },
      eth_getStorageAt(address, position, tag) {
        const module = 'proxy';
        const action = 'eth_getStorageAt';
        var query = querystring.stringify({
          module, action, apiKey, address, position, tag
        });
        return getRequest(query);
      },
      eth_gasPrice() {
        const module = 'proxy';
        const action = 'eth_gasPrice';
        var query = querystring.stringify({
          module, action, apiKey
        });
        return getRequest(query);
      },
      eth_estimateGas(to, value, gasPrice, gas) {
        const module = 'proxy';
        const action = 'eth_estimateGas';
        var query = querystring.stringify({
          module, action, apiKey, to, value, gasPrice, gas
        });
        return getRequest(query);
      },


    },
    /**
     * @namespace etherscan/stats
     */
    stats: {
      /*
       * Returns the supply of Tokens
       */
      tokensupply(tokenname) {
        const module = 'stats';
        const action = 'tokensupply';
        var query = querystring.stringify({
          module, action, tokenname, apiKey
        });
        return getRequest(query);
      },
      /*
       * Returns total supply of ether
       */
      ethsupply() {
        const module = 'stats';
        const action = 'ethsupply';
        var query = querystring.stringify({
          module, action, apiKey
        });
        return getRequest(query);
      },

      /*
       * Returns tthe price of ether now
       */
      ethprice() {
        const module = 'stats';
        const action = 'ethprice';
        var query = querystring.stringify({
          module, action, apiKey
        });
        return getRequest(query);
      }
    },
    /**
     * @namespace etherscan/block
     */
    block: {
      /*
       * Find the block reward for a given address and block
       */
      getblockreward(address, blockno) {
        const module = 'block';
        const action = 'getblockreward';
        if (!blockno) {
          blockno = 0;
        }
        var query = querystring.stringify({
          module, action, address, blockno, apiKey
        });
        return getRequest(query);
      }
    },
    /**
     * @namespace etherscan/transaction
     */
    transaction: {
      /*
       * returns the status of a specific transaction hash
       */
      getstatus(txhash) {
        const module = 'transaction';
        const action = 'getstatus';
        var query = querystring.stringify({
          module, action, txhash, apiKey
        });
        return getRequest(query);
      }
    },
    /**
     * @namespace etherscan/contract
     */
    contract: {
      /*
       * Returns the ABI/Interface of a given contract
       */
      getabi(address) {
        const module = 'contract';
        const action = 'getabi';

        var query = querystring.stringify({
          module, action, address, apiKey
        });

        return getRequest(query);
      }
    },
    /**
     * @namespace etherscan/accounts
     */
    account: {
      /*
       * Returns the supply of tokens, given a specific address of one token account
       */
      tokensupply(contractaddress)Â {
        const module = 'account';
        const action = 'tokensupply';
        var query = querystring.stringify({
          module, action, contractaddress, apiKey
        });
        return getRequest(query);
      },
      /*
       * Returns the amount of Tokens a specific account owns
       */
      tokenbalance(address, tokenname, contractaddress){
        const module = 'account';
        const action = 'tokenbalance';
        const  tag = 'latest';

        var queryObject = {
          module, action, apiKey, tag
        };

        if (contractaddress) {
          queryObject.contractaddress = contractaddress;
        }

        if (tokenname) {
          queryObject.tokenname = tokenname;
        }
        var query = querystring.stringify(queryObject);
        return getRequest(query);
      },
      /*
       * Returns the balance of a sepcific account
       */
      balance(address) {
        const module = 'account';
        let action = 'balance';
        const tag = 'latest';

        if (typeof address != 'string' &amp;&amp; address.length) {
          address = address.join(',');
          action = 'balancemulti';
        }

        var query = querystring.stringify({
          module, action, tag, address, apiKey
        });
        return getRequest(query);
      },
      /*
       * Get a list of internal transactions
       */
      txlistinternal(address, startblock, endblock, sort) {
        const module = 'account';
        const action = 'txlistinternal';

        if (!startblock) {
          startblock = 0;
        }

        if (!endblock) {
          endblock = 'latest';
        }

        if (!sort) {
          sort = 'asc';
        }

        var query = querystring.stringify({
          module, action, startblock, endblock, sort, address, apiKey
        });

        return getRequest(query);
      },
      /*
       * Get a list of transactions for a specfic address
       */
      txlist(address, startblock, endblock, sort) {
        const module = 'account';
        const action = 'txlist';

        if (!startblock) {
          startblock = 0;
        }

        if (!endblock) {
          endblock = 'latest';
        }

        if (!sort) {
          sort = 'asc';
        }

        var query = querystring.stringify({
          module, action, startblock, endblock, sort, address, apiKey
        });

        return getRequest(query);
      },
      /*
       * Get a list of blocks that a specific account has mineds
       */
      getminedblocks(address) {
        const module = 'account';
        const action = 'getminedblocks';
        var query = querystring.stringify({
          module, action, address, apiKey
        });
        return getRequest(query);
      }
    }
  };
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="etherscan.html">etherscan</a></li><li><a href="etherscan_accounts.html">etherscan/accounts</a></li><li><a href="etherscan_block.html">etherscan/block</a></li><li><a href="etherscan_contract.html">etherscan/contract</a></li><li><a href="etherscan_log.html">etherscan/log</a></li><li><a href="etherscan_proxy.html">etherscan/proxy</a></li><li><a href="etherscan_stats.html">etherscan/stats</a></li><li><a href="etherscan_transaction.html">etherscan/transaction</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-tutorial.html">tutorial</a></li></ul><h3>Global</h3><ul><li><a href="global.html#getLogs">getLogs</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a> on Mon Oct 10 2016 14:05:58 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
